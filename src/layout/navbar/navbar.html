<header
  class="bg-navbar-bg text-navbar-text border-b border-black/10 dark:border-white/10 transition-colors duration-300"
>
  <div class="max-w-7xl mx-auto px-6 h-14 flex items-center gap-4">
    <!-- LOGO -->
    <div class="flex items-center gap-2 font-semibold tracking-wide text-lg">
      <lucide-icon
        [img]="layers"
        class="w-5 h-5 transition-transform duration-300"
        [class.rotate-12]="theme.currentTheme() !== 'default'"
      />

      <span>YugiDex</span>
    </div>

    <span class="flex-1"></span>

    <!-- DARK / LIGHT -->
    <button
      class="p-2 rounded-md hover:bg-black/10 dark:hover:bg-white/10 transition-transform duration-300"
      (click)="theme.toggleDarkMode()"
      [class.rotate-180]="theme.isDark()"
    >
      <lucide-icon [img]="theme.isDark() ? moon : sun" class="w-5 h-5" />
    </button>

    <!-- THEME MENU -->
    <div class="relative">
      <!-- TRIGGER -->
      <button
        class="flex items-center gap-2 px-3 py-2 rounded-md bg-black/10 dark:bg-white/10 hover:bg-black/20 dark:hover:bg-white/20 transition"
        (click)="toggleMenu()"
      >
        <img
          [src]="currentAvatar"
          class="w-6 h-6 rounded object-cover"
          alt=""
        />

        <span class="text-sm font-medium">
          {{ theme.currentTheme() | titlecase }}
        </span>

        <lucide-icon [img]="chevronDown" class="w-4 h-4 opacity-70" />
      </button>

      <!-- MENU -->
      @if (open) {
      <div
        class="absolute right-0 mt-2 w-56 bg-card-bg text-card-text rounded-xl shadow-xl ring-1 ring-black/10 dark:ring-white/10 overflow-hidden z-50 animate-in fade-in zoom-in duration-200"
      >
        @for (t of themes; track t.key) {
        <button
          class="w-full flex items-center gap-3 px-4 py-2 text-left hover:bg-black/10 dark:hover:bg-white/10 transition"
          (click)="selectTheme(t.key)"
        >
          <img [src]="t.avatar" class="w-7 h-7 rounded object-cover" alt="" />

          <span class="flex-1 text-sm font-medium"> {{ t.label }} </span>

          @if (t.key === theme.currentTheme()) {
          <lucide-icon [img]="check" class="w-4 h-4 opacity-70" />
          }
        </button>
        }
      </div>
      }
    </div>
  </div>
</header>
